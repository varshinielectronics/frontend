<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Form Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            color: #333;
        }
        .container {
            display: grid;
            grid-template-columns: 300px 1fr 400px;
            gap: 20px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }
        .panel {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .tools-panel h3, .preview-panel h3, .properties-panel h3 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
            color: #495057;
        }
        .tool-item {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            cursor: grab;
            transition: all 0.3s;
            text-align: center;
        }
        .tool-item:hover {
            background: #e9ecef;
            border-color: #6c757d;
            transform: translateY(-2px);
        }
        .form-preview {
            min-height: 500px;
            border: 2px dashed #adb5bd;
            border-radius: 8px;
            padding: 20px;
            background: #fdfdfd;
        }
        .form-element {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            cursor: move;
            position: relative;
            transition: all 0.3s;
        }
        .form-element:hover {
            border-color: #007bff;
            box-shadow: 0 2px 8px rgba(0,123,255,0.1);
        }
        .form-element.selected {
            border-color: #007bff;
            background: #e7f3ff;
        }
        .element-actions {
            position: absolute;
            top: 5px;
            right: 5px;
            display: none;
        }
        .form-element:hover .element-actions {
            display: flex;
            gap: 5px;
        }
        .action-btn {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 3px;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
        }
        .action-btn.delete {
            background: #dc3545;
        }
        .action-btn.edit {
            background: #ffc107;
        }
        .properties-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .form-group label {
            font-weight: 500;
        }
        .form-group input, .form-group select, .form-group textarea {
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
        }
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }
        .btn-primary {
            background: #007bff;
            color: white;
        }
        .btn-primary:hover {
            background: #0056b3;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn-success:hover {
            background: #1e7e34;
        }
        .export-options {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }
        .empty-state {
            text-align: center;
            color: #6c757d;
            padding: 40px 20px;
        }
        .empty-state i {
            font-size: 48px;
            margin-bottom: 10px;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Tools Panel -->
        <div class="panel tools-panel">
            <h3>üì¶ Form Elements</h3>
            <div class="tool-item" draggable="true" data-type="text">
                üìù Text Input
            </div>
            <div class="tool-item" draggable="true" data-type="email">
                üìß Email Input
            </div>
            <div class="tool-item" draggable="true" data-type="textarea">
                üìÑ Text Area
            </div>
            <div class="tool-item" draggable="true" data-type="select">
                üìã Dropdown
            </div>
            <div class="tool-item" draggable="true" data-type="checkbox">
                ‚òëÔ∏è Checkbox
            </div>
            <div class="tool-item" draggable="true" data-type="radio">
                üîò Radio Buttons
            </div>
            <div class="tool-item" draggable="true" data-type="date">
                üìÖ Date Picker
            </div>
            <div class="tool-item" draggable="true" data-type="file">
                üìé File Upload
            </div>
            <div class="tool-item" draggable="true" data-type="button">
                üîò Button
            </div>
        </div>

        <!-- Preview Panel -->
        <div class="panel preview-panel">
            <h3>üëÄ Form Preview</h3>
            <div class="form-preview" id="formPreview">
                <div class="empty-state">
                    <div>üìã</div>
                    <p>Drag form elements here to start building</p>
                </div>
            </div>
        </div>

        <!-- Properties Panel -->
        <div class="panel properties-panel">
            <h3>‚öôÔ∏è Element Properties</h3>
            <div id="propertiesForm" class="properties-form">
                <div class="empty-state">
                    <div>üîß</div>
                    <p>Select an element to edit its properties</p>
                </div>
            </div>
            
            <div class="export-options">
                <h4>Export Form</h4>
                <button class="btn btn-success" onclick="exportHTML()">Export as HTML</button>
                <button class="btn btn-primary" onclick="exportJSON()">Export as JSON</button>
                <button class="btn" onclick="previewForm()">Preview Form</button>
            </div>
        </div>
    </div>

    <script>
        let formElements = [];
        let selectedElement = null;
        let elementIdCounter = 1;

        // Initialize drag and drop
        document.querySelectorAll('.tool-item').forEach(tool => {
            tool.addEventListener('dragstart', handleDragStart);
        });

        const formPreview = document.getElementById('formPreview');
        formPreview.addEventListener('dragover', handleDragOver);
        formPreview.addEventListener('drop', handleDrop);

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.type);
        }

        function handleDragOver(e) {
            e.preventDefault();
            formPreview.style.backgroundColor = '#f8f9fa';
        }

        function handleDrop(e) {
            e.preventDefault();
            formPreview.style.backgroundColor = '#fdfdfd';
            
            const elementType = e.dataTransfer.getData('text/plain');
            addFormElement(elementType);
        }

        function addFormElement(type) {
            const elementId = 'element-' + elementIdCounter++;
            const newElement = {
                id: elementId,
                type: type,
                label: getDefaultLabel(type),
                required: false,
                placeholder: '',
                options: type === 'select' || type === 'radio' ? ['Option 1', 'Option 2'] : []
            };

            formElements.push(newElement);
            renderFormPreview();
            selectElement(newElement);
        }

        function getDefaultLabel(type) {
            const labels = {
                text: 'Text Input',
                email: 'Email Address',
                textarea: 'Message',
                select: 'Select Option',
                checkbox: 'Checkbox',
                radio: 'Radio Options',
                date: 'Select Date',
                file: 'Upload File',
                button: 'Submit Button'
            };
            return labels[type] || 'Form Element';
        }

        function renderFormPreview() {
            const formPreview = document.getElementById('formPreview');
            
            if (formElements.length === 0) {
                formPreview.innerHTML = `
                    <div class="empty-state">
                        <div>üìã</div>
                        <p>Drag form elements here to start building</p>
                    </div>
                `;
                return;
            }

            formPreview.innerHTML = '';
            
            formElements.forEach(element => {
                const elementDiv = document.createElement('div');
                elementDiv.className = `form-element ${selectedElement && selectedElement.id === element.id ? 'selected' : ''}`;
                elementDiv.dataset.id = element.id;
                
                let elementHTML = '';
                
                switch(element.type) {
                    case 'text':
                    case 'email':
                    case 'date':
                    case 'file':
                        elementHTML = `
                            <label>${element.label} ${element.required ? '<span style="color:red">*</span>' : ''}</label>
                            <input type="${element.type}" placeholder="${element.placeholder}" ${element.required ? 'required' : ''} style="width: 100%; padding: 8px; margin-top: 5px;">
                        `;
                        break;
                    case 'textarea':
                        elementHTML = `
                            <label>${element.label} ${element.required ? '<span style="color:red">*</span>' : ''}</label>
                            <textarea placeholder="${element.placeholder}" ${element.required ? 'required' : ''} style="width: 100%; padding: 8px; margin-top: 5px; min-height: 100px;"></textarea>
                        `;
                        break;
                    case 'select':
                        elementHTML = `
                            <label>${element.label} ${element.required ? '<span style="color:red">*</span>' : ''}</label>
                            <select ${element.required ? 'required' : ''} style="width: 100%; padding: 8px; margin-top: 5px;">
                                ${element.options.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
                            </select>
                        `;
                        break;
                    case 'checkbox':
                        elementHTML = `
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" ${element.required ? 'required' : ''}>
                                ${element.label} ${element.required ? '<span style="color:red">*</span>' : ''}
                            </label>
                        `;
                        break;
                    case 'radio':
                        elementHTML = `
                            <label>${element.label} ${element.required ? '<span style="color:red">*</span>' : ''}</label>
                            <div style="margin-top: 5px;">
                                ${element.options.map((opt, index) => `
                                    <label style="display: block; margin: 5px 0;">
                                        <input type="radio" name="${element.id}" value="${opt}" ${index === 0 && element.required ? 'required' : ''}>
                                        ${opt}
                                    </label>
                                `).join('')}
                            </div>
                        `;
                        break;
                    case 'button':
                        elementHTML = `
                            <button type="button" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                ${element.label}
                            </button>
                        `;
                        break;
                }
                
                elementDiv.innerHTML = `
                    ${elementHTML}
                    <div class="element-actions">
                        <button class="action-btn edit" onclick="selectElement(getElementById('${element.id}'))">‚úèÔ∏è</button>
                        <button class="action-btn delete" onclick="deleteElement('${element.id}')">üóëÔ∏è</button>
                    </div>
                `;
                
                elementDiv.addEventListener('click', (e) => {
                    if (!e.target.closest('.element-actions')) {
                        selectElement(element);
                    }
                });
                
                formPreview.appendChild(elementDiv);
            });
        }

        function getElementById(id) {
            return formElements.find(el => el.id === id);
        }

        function selectElement(element) {
            selectedElement = element;
            renderFormPreview();
            renderPropertiesForm();
        }

        function deleteElement(id) {
            formElements = formElements.filter(el => el.id !== id);
            if (selectedElement && selectedElement.id === id) {
                selectedElement = null;
            }
            renderFormPreview();
            renderPropertiesForm();
        }

        function renderPropertiesForm() {
            const propertiesForm = document.getElementById('propertiesForm');
            
            if (!selectedElement) {
                propertiesForm.innerHTML = `
                    <div class="empty-state">
                        <div>üîß</div>
                        <p>Select an element to edit its properties</p>
                    </div>
                `;
                return;
            }

            let propertiesHTML = `
                <div class="form-group">
                    <label>Label</label>
                    <input type="text" id="propLabel" value="${selectedElement.label}" onchange="updateProperty('label', this.value)">
                </div>
                <div class="form-group">
                    <label>Required</label>
                    <input type="checkbox" id="propRequired" ${selectedElement.required ? 'checked' : ''} onchange="updateProperty('required', this.checked)">
                </div>
            `;

            if (['text', 'email', 'textarea'].includes(selectedElement.type)) {
                propertiesHTML += `
                    <div class="form-group">
                        <label>Placeholder</label>
                        <input type="text" id="propPlaceholder" value="${selectedElement.placeholder}" onchange="updateProperty('placeholder', this.value)">
                    </div>
                `;
            }

            if (['select', 'radio'].includes(selectedElement.type)) {
                propertiesHTML += `
                    <div class="form-group">
                        <label>Options (one per line)</label>
                        <textarea id="propOptions" onchange="updateProperty('options', this.value.split('\\n'))">${selectedElement.options.join('\n')}</textarea>
                    </div>
                `;
            }

            if (selectedElement.type === 'button') {
                propertiesHTML += `
                    <div class="form-group">
                        <label>Button Type</label>
                        <select id="propButtonType" onchange="updateProperty('buttonType', this.value)">
                            <option value="button">Button</option>
                            <option value="submit">Submit</option>
                            <option value="reset">Reset</option>
                        </select>
                    </div>
                `;
            }

            propertiesForm.innerHTML = propertiesHTML;
        }

        function updateProperty(property, value) {
            if (selectedElement) {
                selectedElement[property] = value;
                renderFormPreview();
            }
        }

        function exportHTML() {
            let html = '<form>\n';
            
            formElements.forEach(element => {
                // Generate HTML for each form element
                // This would be more complex in a real implementation
                html += `  <!-- ${element.label} -->\n`;
                html += `  <div class="form-group">\n`;
                
                switch(element.type) {
                    case 'text':
                    case 'email':
                    case 'date':
                        html += `    <label>${element.label}${element.required ? ' *' : ''}</label>\n`;
                        html += `    <input type="${element.type}" name="${element.id}" placeholder="${element.placeholder}"${element.required ? ' required' : ''}>\n`;
                        break;
                    case 'textarea':
                        html += `    <label>${element.label}${element.required ? ' *' : ''}</label>\n`;
                        html += `    <textarea name="${element.id}" placeholder="${element.placeholder}"${element.required ? ' required' : ''}></textarea>\n`;
                        break;
                    case 'button':
                        html += `    <button type="button">${element.label}</button>\n`;
                        break;
                }
                
                html += `  </div>\n\n`;
            });
            
            html += '</form>';
            
            // Download as file
            downloadFile('form.html', html);
        }

        function exportJSON() {
            const formData = {
                elements: formElements,
                createdAt: new Date().toISOString()
            };
            
            downloadFile('form.json', JSON.stringify(formData, null, 2));
        }

        function previewForm() {
            const previewWindow = window.open('', '_blank');
            previewWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Form Preview</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                        .form-group { margin-bottom: 15px; }
                        label { display: block; margin-bottom: 5px; font-weight: bold; }
                        input, textarea, select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
                        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
                    </style>
                </head>
                <body>
                    <h2>Form Preview</h2>
                    ${document.getElementById('formPreview').innerHTML}
                </body>
                </html>
            `);
        }

        function downloadFile(filename, content) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Initialize
        renderFormPreview();
        renderPropertiesForm();
    </script>
</body>
</html>